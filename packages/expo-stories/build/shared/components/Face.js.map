{"version":3,"file":"Face.js","sourceRoot":"","sources":["../../../shared/components/Face.tsx"],"names":[],"mappings":"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","sourcesContent":["import { FaceFeature } from 'expo-face-detector';\nimport React from 'react';\nimport { StyleSheet, Text, View } from 'react-native';\n\nconst landmarkSize = 2;\n\nexport const scaledFace = (scale: number) => ({\n  faceID,\n  bounds,\n  rollAngle,\n  yawAngle,\n}: FaceFeature) => (\n  <View\n    key={faceID}\n    style={[\n      styles.face,\n      {\n        width: bounds.size.width * scale,\n        height: bounds.size.height * scale,\n        left: bounds.origin.x * scale,\n        top: bounds.origin.y * scale,\n        transform: [\n          { perspective: 600 },\n          { rotateZ: `${rollAngle!.toFixed(0)}deg` },\n          { rotateY: `${yawAngle!.toFixed(0)}deg` },\n        ],\n      },\n    ]}>\n    <Text style={styles.faceText}>ID: {faceID}</Text>\n    <Text style={styles.faceText}>rollAngle: {rollAngle!.toFixed(0)}</Text>\n    <Text style={styles.faceText}>yawAngle: {yawAngle!.toFixed(0)}</Text>\n  </View>\n);\n\nexport const scaledLandmarks = (scale: number) => (face: FaceFeature) => {\n  const renderLandmark = (position?: { x: number; y: number }) =>\n    position && (\n      <View\n        key={`${position?.x ?? 'no-x'}${position?.y ?? 'no-y'}`}\n        style={[\n          styles.landmark,\n          {\n            left: (position.x - landmarkSize / 2) * scale,\n            top: (position.y - landmarkSize / 2) * scale,\n          },\n        ]}\n      />\n    );\n  console.log('landmark', face);\n  return (\n    <View key={`landmarks-${face.faceID}`}>\n      {renderLandmark(face.leftEyePosition)}\n      {renderLandmark(face.rightEyePosition)}\n      {renderLandmark(face.leftEarPosition)}\n      {renderLandmark(face.rightEarPosition)}\n      {renderLandmark(face.leftCheekPosition)}\n      {renderLandmark(face.rightCheekPosition)}\n      {renderLandmark(face.leftMouthPosition)}\n      {renderLandmark(face.mouthPosition)}\n      {renderLandmark(face.rightMouthPosition)}\n      {renderLandmark(face.noseBasePosition)}\n      {renderLandmark(face.bottomMouthPosition)}\n    </View>\n  );\n};\n\nexport const face = scaledFace(1);\nexport const landmarks = scaledLandmarks(1);\n\nconst styles = StyleSheet.create({\n  face: {\n    padding: 10,\n    borderWidth: 2,\n    borderRadius: 2,\n    position: 'absolute',\n    borderColor: '#FFD700',\n    justifyContent: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n  },\n  landmark: {\n    width: landmarkSize,\n    height: landmarkSize,\n    position: 'absolute',\n    backgroundColor: 'red',\n  },\n  faceText: {\n    color: '#FFD700',\n    fontWeight: 'bold',\n    textAlign: 'center',\n    margin: 10,\n    backgroundColor: 'transparent',\n  },\n});\n"]}