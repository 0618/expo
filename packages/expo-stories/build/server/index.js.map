{"version":3,"file":"index.js","sourceRoot":"","sources":["../../server/index.ts"],"names":[],"mappings":";;;AACA,yDAAwD;AACxD,uDAAsD;AACtD,mCAAwC;AACxC,2DAA0D;AAE1D,SAAS,WAAW,CAAC,YAA2B;IAC9C,IAAM,aAAa,GAAG,qBAAY,CAAC,YAAY,CAAC,CAAC;IAEjD,uCAAkB,CAAC,aAAa,CAAC,CAAC;IAElC,IAAM,MAAM,GAAG,mCAAgB,CAAC,aAAa,CAAC,CAAC;IAC/C,IAAM,OAAO,GAAG,qCAAiB,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;IAEzD,CAAC,MAAM,EAAE,QAAQ,EAAE,SAAS,EAAE,SAAS,EAAE,mBAAmB,EAAE,SAAS,CAAC,CAAC,OAAO,CAAC,UAAA,SAAS;QACxF,OAAO,CAAC,EAAE,CAAC,SAAS,EAAE;YACpB,OAAO,CAAC,OAAO,EAAE,CAAC;YAClB,MAAM,CAAC,OAAO,EAAE,CAAC;YACjB,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAClB,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC;AAEQ,kCAAW","sourcesContent":["import { IServerConfig } from '../types';\nimport { createFileWatcher } from './createFileWatcher';\nimport { createHttpServer } from './createHttpServer';\nimport { mergeConfigs } from './shared';\nimport { writeRequiredFiles } from './writeRequiredFiles';\n\nfunction startServer(serverConfig: IServerConfig) {\n  const mergedConfigs = mergeConfigs(serverConfig);\n\n  writeRequiredFiles(mergedConfigs);\n\n  const server = createHttpServer(mergedConfigs);\n  const watcher = createFileWatcher(mergedConfigs, server);\n\n  [`exit`, `SIGINT`, `SIGUSR1`, `SIGUSR2`, `uncaughtException`, `SIGTERM`].forEach(eventType => {\n    process.on(eventType, () => {\n      watcher.cleanup();\n      server.cleanup();\n      process.exit(1);\n    });\n  });\n}\n\nexport { startServer };\n"]}